<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ass tits titan</title>
    <link rel="stylesheet" href="hologramStyle.css">
</head>
<body>

 <div class="buzz_wrapper">
    <div>
        <div class="eyeButton">
            <img class="eyeButton" src="assets/eye.png">
        </div>
            </div>
    <div class="">
        <div class="text">
            <span>
                <div class="hologramImage" id="imageContainer">
                    <img id="mouth" src="mouth-closed.png" alt="Mouth Animation">
                </div>
            </span>
        </div>
        <div class="scanline"></div>
    </div>
</div>



    <script>

        // Audio setup
        const audio = new Audio('your-audio2.mp3');
        const images = [
            'mouth-closed.png',
            'mouth-half-closed.png',
            'mouth-open.png'
        ];

        const imgElement = document.getElementById('mouth');
        const playButton = document.getElementById('playButton');

        // Web Audio API setup
        let audioCtx, analyser, dataArray;

        function setupAudio() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioCtx.createAnalyser();
            analyser.fftSize = 256;

            const source = audioCtx.createMediaElementSource(audio);
            source.connect(analyser);
            analyser.connect(audioCtx.destination);

            dataArray = new Uint8Array(analyser.frequencyBinCount);
        }

        // Function to update mouth animation
        function animateMouth() {

            if (!audioCtx || audio.paused) return;

            analyser.getByteFrequencyData(dataArray);

            let sum = 0;
            for (let i = 0; i < dataArray.length; i++) {
                sum += dataArray[i];
            }
            const avgVolume = sum / dataArray.length;

            // Choose the mouth image based on volume
            if (avgVolume < 50) {
                imgElement.src = images[0]; // Closed mouth
            } else if (avgVolume < 120) {
                imgElement.src = images[1]; // Half-open mouth
            } else {
                imgElement.src = images[2]; // Fully open mouth
            }

            requestAnimationFrame(animateMouth);
        }
        const eyeButton = document.querySelector('.eyeButton');
        const hologramImage = document.querySelector('.hologramImage');
        let isVisible = false;

        eyeButton.addEventListener('click', () => {
    if (!isVisible) {
        // Open character & start audio
        if (!audioCtx) setupAudio();
        audioCtx.resume().then(() => {
            audio.play();
            animateMouth();
        });

        // Show character with animation
        hologramImage.style.display = "block";
        setTimeout(() => {
            hologramImage.classList.add('active');
            hologramImage.classList.remove('hidden');
        }, 10);
    } else {
        // Stop audio & hide character smoothly
        audio.pause();
        audio.currentTime = 0; // Reset audio
        hologramImage.classList.add('hidden');
        hologramImage.classList.remove('active');

        setTimeout(() => {
            hologramImage.style.display = "none";
        }, 500);
    }
    isVisible = !isVisible;
});

        //  Auto-hide when audio finishes
        audio.addEventListener('ended', () => {
            if (isVisible) {
                hologramImage.classList.add('hidden');
                hologramImage.classList.remove('active');

                setTimeout(() => {
                    hologramImage.style.display = "none";
                }, 500);
                isVisible = false;
            }
        });
        

    </script>

</body>
</html>
